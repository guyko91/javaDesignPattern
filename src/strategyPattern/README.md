# Strategy패턴
## 1. 정의
- 행위를 클래스로 캡슐화 해 동적으로 행위를 자유롭게 바꿀 수 있게 해주는 패턴.
    - 같은 문제를 해결하는 여러 알고리즘이 클래스별로 캡슐화되어 있고, 이들이 필요할 때 교체할 수 있도록 함으로써 동일한 문제를 다른 알고리즘으로 해결할 수 있게 하는 패턴.
- **행위(Behavioral)패턴**의 하나.
    - *행위(Behavioral)패턴* : 객체나 클래스 사이의 알고리즘이나 책임 분배에 관련된 패턴. 한 객체가 혼자 수행할 수 없는 작업을 여러 개의 객체로 어떻게 분배하는지, 그렇게 하면서 결합도를 최소화 하는 것에 중점을 둔다.
- **전략**을 쉽게 바꿀 수 있도록 하는 디자인 패턴이다.
    - *전략* :어떤 목적을 달성하기 위해 일을 수행하는 방식, 비즈니스 규칙, 문제를 해결하는 알고리즘 등.
    - 게임 프로그래밍에서 전략 패턴은 매우 유용하다. (상황에 따라 공격이나 행동 방식을 바꿔야 하는 상황.)
    - Strategy패턴 UML
     ![](https://gmlwjd9405.github.io/images/design-pattern-strategy/strategy-pattern.png)
        - Strategy : 인터페이스나 추상 클래스로 외부에서 동일한 방식으로 알고리즘을 호출하는 방법을 명시.
        - ConcreteStrategy : Strategy패턴에서 명시한 알고리즘을 실제로 구현한 클래스.
        - Context : 스트래티지 패턴을 이용하는 역할을 수행한다. 필요에 따라 동적으로 구체적인 전략을 바꿀 수 있도록 setter 메서드('**집약관계**')를 제공한다.
            - *집약관계* 
                - 한 클래스가 다른 클래스를 포함하는 관계.
                - '전체' 와 '부분'의 관계이며, '전체'에 해당하는 클래스를 빈 마름모 화살표로 가리켜 표시한다.
                - '부분'에 해당 하는 객체를 다른 객체와 공유할 수 있는 경우에 집약 관계로 나타낸다.
                - '전체'에 해당하는 객체가 삭제되어도 '부분' 객체는 사라지지 않는다.
                ![](https://t1.daumcdn.net/cfile/tistory/2465AB3A557D277A2E)

## Example
## 1. As-Is
- 추상 클래스 Robot을 각 클래스 TaekwonV와 Atom에서 상속받아 구현.
    - 새로운 기능을 변경하기 위해 기존 코드의 내용을 수정해야 하므로, **OCP**에 위배된다.
        - *OCP(Open-Closed Principle)*
            - OOP의 원칙 중 하나로, 확장에 개방적이고 변경에 폐쇄적이어야 한다.
            - 기능을 추가할땐 기능만 추가하도록 하고, 기능의 변경이 이 기능을 가져다 쓰는 다른 코드들에 영향을 끼치지 않게 해야한다.
    - 추상 메서드 attack과 move를 상속받은 객체마다 중복이 발생한다.
    - attack과 move 방식에 문제가 생기는 경우, 중복되는 모든 코드를 일관성있게 다시 변경해주어야 한다.
## 2. To-Be
- As-Is의 예제에서 문제를 발생시키는 요인은 로봇의 **이동 방식과 공격 방식의 변화** 이다.
- 이를 캡슐화 하기 위해서는 외부에서 구체적인 이동 방식과 공격 방식을 담은 구체적인 클래스들을 은닉해야 한다.
    - 공격과 이동을 위한 인터페이스를 각각 만들고, 이를 실제로 구현할 클래스들을 만든다.
![](https://gmlwjd9405.github.io/images/design-pattern-strategy/strategy-solution.png)
    - 구체적인 공격 및 이동 방식이 AttackStrategy 및 MoveStrategy인터페이스에 의해 캡슐화 되어 있다.
    - Strategy 패턴을 이용하면 새로운 기능의 추가 (새로운 이동 및 새로운 공격)에도 기존 코드에는 영향을 미치지 않는다.
- To-Be의 변경된 구조에서는 외부에서 로봇 객체의 이동 및 공격 방식을 임의로 바꾸도록 해주는 setter메서드가 추가로 필요하다. (setMovineStrategy, setAttackStrategy)
- 이러한 변경이 가능한 이유는 상속 대신 '집약 관계'를 이용했기 때문이다.